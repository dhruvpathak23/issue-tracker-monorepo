<div class="container">
  <div class="header">
    <h1>Issues</h1>
    <button class="btn btn-primary" (click)="createNewIssue()">+ New Issue</button>
  </div>

  <div class="filters">
    <div class="filter-group">
      <input 
        type="text" 
        placeholder="Search issues..." 
        [(ngModel)]="search"
        (ngModelChange)="onSearchChange()"
        class="input"
      />
    </div>
    <div class="filter-group">
      <select [(ngModel)]="status" (ngModelChange)="onFilterChange()" class="input">
        <option value="">All Statuses</option>
        <option value="open">Open</option>
        <option value="closed">Closed</option>
      </select>
    </div>
    <div class="filter-group">
      <select [(ngModel)]="priority" (ngModelChange)="onFilterChange()" class="input">
        <option value="">All Priorities</option>
        <option value="low">Low</option>
        <option value="medium">Medium</option>
        <option value="high">High</option>
      </select>
    </div>
    <div class="filter-group">
      <input 
        type="text" 
        placeholder="Assignee..." 
        [(ngModel)]="assignee"
        (ngModelChange)="onFilterChange()"
        class="input"
      />
    </div>
  </div>

  <div *ngIf="loading" class="loading">Loading issues...</div>

  <div *ngIf="!loading && issues.length === 0" class="empty-state">
    No issues found
  </div>

  <table *ngIf="!loading && issues.length > 0" class="issues-table">
    <thead>
      <tr>
        <th>Title</th>
        <th>Status</th>
        <th>Priority</th>
        <th>Assignee</th>
        <th>Created</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let issue of issues" [class]="'status-' + issue.status">
        <td class="title">{{ issue.title }}</td>
        <td class="status">
          <span [class]="'status-badge status-' + issue.status">{{ issue.status }}</span>
        </td>
        <td class="priority">
          <span [class]="'priority-badge priority-' + issue.priority">{{ issue.priority }}</span>
        </td>
        <td class="assignee">{{ issue.assignee || '-' }}</td>
        <td class="created">{{ issue.createdAt | date: 'short' }}</td>
        <td class="actions">
          <button class="btn btn-sm btn-info" (click)="viewIssue(issue.id)">View</button>
          <button class="btn btn-sm btn-secondary" (click)="editIssue(issue.id)">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="deleteIssue(issue.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && issues.length > 0" class="pagination">
    <button class="btn" (click)="previousPage()" [disabled]="page === 1">Previous</button>
    <span>Page {{ page }} of {{ Math.ceil(total / pageSize) }}</span>
    <button class="btn" (click)="nextPage()" [disabled]="page * pageSize >= total">Next</button>
  </div>
</div>
